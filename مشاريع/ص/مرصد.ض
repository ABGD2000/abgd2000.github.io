تحميل "httplib.ring"
خادم = أعمل Server

وحدة مرصد رر
صحيح = "(\d+)"
نص = "(\w+)"

 ضيف  جزء
 المسار=""
//? "Try localhost:8080/report"
//oServer.route(:Get,"/report",:report)

دالة نشر_البيانات
مرر خادم.getPostData()
تمام

دالة تشتغل_المرصد الضيف , الجزء
ضيف=الضيف  جزء=الجزء
شوف ضيف + ":" + جزء + سطر
خادم.listen(ضيف, جزء)
تمام
دالة أنشر  عنوان , النوع , المحتوى 


تمام


دالة أحضر عنوان , النوع , المحتوى 
عنوان =  print2str(المسار+عنوان)
شوف ضيف + ":" + جزء+ عنوان + سطر
لو النوع="نص"
// 'خادم.setContent("'+المحتوى+'", "html/plain")'
خادم.route(:Get,عنوان,'خادم.setContent("'+المحتوى+'", " text/plain ; charset=UTF-8 ")')
إذا النوع="دالة"
جملة_النتفيذ=' النتيجة = فارغ eval("النتيجة ='+المحتوى+'") see النتيجة  try  النتيجة = list2str(النتيجة) catch done see  خادم.setContent(النتيجة, " text/plain ; charset=UTF-8 ")'
شوف جملة_النتفيذ
خادم.route(:Get,عنوان,جملة_النتفيذ  )
لا 

تم


تمام
