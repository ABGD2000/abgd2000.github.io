# ملف: هجري.ض



# Constants
نقطة_الهجرة = 227015

دالة تصف(cals, attr)
 مرر 0


دالة هجري_إلى_ميلادي(هجري)
    النتائج = رقم_إلى_ميلادي(هجري_إلى_رقم(هجري[:السنة], هجري[:الشهر], هجري[:اليوم]))

    
   
    لو isobject(هجري)
        لو تصف(هجري, "الساعة") && تصف(هجري, "الدقيقة") && تصف(هجري, "الثانية") && تصف(هجري, "المنطقة_الزمانية")
            add( النتائج, هجري[:الساعة]  )
            add(النتائج, هجري[:الدقيقة])
            add(النتائج, هجري[:الثانية])
            add(النتائج, هجري[:المنطقة_الزمانية])
        تم
    تم
    مرر النتائج

دالة ميلادي_إلى_هجري(ميلادي)
    النتائج = رقم_إلى_هجري(ميلادي_إلى_رقم(ميلادي[:السنة], ميلادي[:الشهر] , ميلادي[:اليوم] ))
    
    لو isobject(ميلادي)
        لو تصف(ميلادي, "الساعة") && تصف(ميلادي, "الدقيقة") && تصف(ميلادي, "الثانية") && تصف(ميلادي, "المنطقة_الزمانية")
            add( النتائج, ميلادي[:الساعة])
            add(النتائج, ميلادي[:الدقيقة])
            add(النتائج, ميلادي [:الثانية])
            add(النتائج, ميلادي[:المنطقة_الزمانية])
        تم
    تم
    مرر النتائج


دالة إزاحة_السنة_هجرية(السنة)
    مرر (((((11 * السنة) + 14) % 30) < 11))

دالة اليوم_الأخير_في_الشهر_الهجري(الشهر, السنة)
   
    لو (الشهر % 2 = 1) || (الشهر = 12 && إزاحة_السنة_هجرية(السنة))
        مرر 30
    لا
        مرر 29
    تم

دالة هجري_إلى_رقم(السنة, الشهر, اليوم)
    أيام_الشهور = 29 * (الشهر - 1)
    بدون_إزاحة_أيام_السنين = 354 * (السنة - 1)
    إزاحة_أيام_السنين = floor((3 + (11 * السنة)) / 30)
    هذه_السنة = floor(الشهر / 2)

    مرر (اليوم + أيام_الشهور + هذه_السنة + بدون_إزاحة_أيام_السنين + إزاحة_أيام_السنين + نقطة_الهجرة)


دالة اليوم_الأخير_في_الشهر_الميلادي(الشهر, السنة)
    
    
    لو الشهر = 2
        لو (السنة % 4 = 0 && السنة % 100 != 0) || (السنة % 400 = 0)
            مرر 29
        تم
    تم
    
    أيام_الشهور = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
    مرر أيام_الشهور[الشهر]

دالة تعديل_اليوم(السنة, الشهر, اليوم)
    اليوم_الأخير = اليوم_الأخير_في_الشهر_الميلادي(الشهر, السنة)
    لو اليوم_الأخير > اليوم
        مرر اليوم
    لا
        مرر اليوم_الأخير
    تم


دالة ميلادي_إلى_رقم(السنة, الشهر, اليوم)
    
    ي = اليوم
    
    من ش = (الشهر - 1) إلى 1 كل -1
        ي += اليوم_الأخير_في_الشهر_الميلادي(ش, السنة)
    دور

    مرر floor(ي + 365 * (السنة - 1) + floor((السنة - 1) / 4) - floor((السنة - 1) / 100) + floor((السنة - 1) / 400))

دالة رقم_إلى_ميلادي(الرقم)
    
    السنة = floor(الرقم / 366 + 0.5)
    كلما الرقم >= ميلادي_إلى_رقم(السنة + 1, 1, 1)
        السنة += 1
    تمام

    الشهر = 1
    كلما الرقم > ميلادي_إلى_رقم(السنة, الشهر, اليوم_الأخير_في_الشهر_الميلادي(الشهر, السنة))
        الشهر += 1
        لو الشهر = 13
            فر
        تم
    تمام

    اليوم = الرقم - ميلادي_إلى_رقم(السنة, الشهر, 1) + 1
    اليوم = تعديل_اليوم(السنة, الشهر, اليوم)

    مرر [السنة, الشهر, اليوم]

دالة رقم_إلى_هجري(الرقم)
    
    لو الرقم <= نقطة_الهجرة
        مرر [0, 0, 0] 
    تم
    
    السنة = floor((الرقم - نقطة_الهجرة) / 355)
    كلما الرقم >= هجري_إلى_رقم(السنة + 1, 1, 1)
        السنة += 1
    تمام

    الشهر = 1
    كلما الرقم > هجري_إلى_رقم(السنة, الشهر, اليوم_الأخير_في_الشهر_الهجري(الشهر, السنة))
        الشهر += 1
    تمام

    اليوم = الرقم - هجري_إلى_رقم(السنة, الشهر, 1) + 1
    
    مرر [السنة, الشهر, اليوم]
