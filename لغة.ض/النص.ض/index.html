<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ملف النص.ض </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f4f4f9;
            margin: 0;
            direction: rtl; /* لضمان دعم اللغة العربية */
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 800px; /* لتحديد عرض المحتوى */
            width: 90%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .content-area {
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 5px;
            padding: 15px;
            text-align: right; /* المحاذاة لليمين للمحتوى العربي */
            font-size: 14px;
            white-space: pre-wrap; /* للحفاظ على التنسيق والمسافات */
            max-height: 400px; /* للتحكم في ارتفاع منطقة المحتوى */
            overflow-y: auto; /* لإضافة شريط تمرير إذا كان المحتوى طويلاً */
            line-height: 1.6;
            color: #495057;
        }
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button i {
            font-size: 18px;
        }
        .filename {
            font-weight: bold;
            color: #28a745;
            display: block;
            margin-bottom: 15px;
        }
        .status-message {
            margin-top: 15px;
            font-size: 14px;
            color: #28a745;
            display: none; /* مخفي افتراضياً */
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ملف النص </h1>
    <span class="filename">اسم الملف: النص.ض</span>

    <div id="fileContentDisplay" class="content-area">
        </div>

    <div class="buttons-container">
        <button onclick="copyContent()"><i class="fas fa-copy"></i> نسخ المحتوى</button>
        <button onclick="downloadFile()"><i class="fas fa-download"></i> تنزيل الملف</button>
    </div>
    <div id="statusMessage" class="status-message"></div>
</div>

<script>
    // المحتوى الكامل لقواعد اللغة كما طلبته
    const fileContent = `تحميل "stdlibcore.ring"    // تحميل المكتبة الأساسية 

//------------------------------------------------------------------------------
// دالة: هل(شرط, قبول, رفض)
// هدفها: تنفيذ اختيار؛ إذا تحقق الشرط تمرر قيمة القبول، وإلا تمرر قيمة الرفض
//------------------------------------------------------------------------------
دالة هل(شرط, قبول, رفض)
    لو شرط
        مرر قبول
    لا
        مرر رفض
    تم
تمام

//------------------------------------------------------------------------------
// دالة: يحتوي(الكلم, الهدف)
// هدفها: تمرير الجزء من السلسلة الذي يبدأ عند أول ظهور للهدف باستخدام substr
//------------------------------------------------------------------------------
دالة يحتوي(الكلم, الهدف)
    مرر substr(الكلم, الهدف)
تمام

//------------------------------------------------------------------------------
// دالة: قسم(نص, علامة)
// هدفها: تقسيم النص عند العلامة المحددة عبر الدالة Split
//------------------------------------------------------------------------------
دالة قسم(نص, علامة)
    مرر Split(نص, علامة)
تمام

//------------------------------------------------------------------------------
// دالة: كلمات(نص)
// هدفها: تقسيم النص إلى كلمات مفصولة بمسافة
//------------------------------------------------------------------------------
دالة كلمات(نص)
    مرر Split(نص, " ")
تمام



//------------------------------------------------------------------------------
// دالة: حروف(نص)
// هدفها: تحليل سلسلة UTF-8 وتحويلها إلى مصفوفة حروف (1–3 بايت)
//------------------------------------------------------------------------------
دالة حروف(نص)

    مصفوفة = []
    ط = 0
    س = 1

    كلما س <= len(نص)

        رقم_الرمز = Ascii(نص[س])

        // حرف من 1 بايت
        لو ((رقم_الرمز & 0xc0) = 0x0)
            مصفوفة + (نص[س])
            س += 1
            ط += 1

        // حرف من 2 بايت
        إذا ((رقم_الرمز & 0xe0) = 0xc0)
            مصفوفة + (نص[س] + نص[س+1])
            س += 2
            ط += 1

        // حرف من 3 بايت
        إذا ((رقم_الرمز & 0xf0) = 0xe0)
            مصفوفة + (نص[س] + نص[س+1] + نص[س+2])
            س += 3
            ط += 1

        // أحرف 4 بايت — غير مدعومة
        إذا ((رقم_الرمز & 0xf8) = 0xf0)
            مرر -1  // خطأ

        لا
            // fallback
            لو (رقم_الرمز >= Ascii(' '))
                مصفوفة + نص[س]
                س += 1
                ط += 1
            لا
                مرر []
            تم

        تم
    لف

    مرر مصفوفة
تمام

//------------------------------------------------------------------------------
// دالة: جمع_الحروف(الحروف_كلمات)
// هدفها: دمج كل مجموعة حروف داخل الكلمات ثم إرجاع نص كامل
//------------------------------------------------------------------------------
دالة جمع_الحروف(الحروف_كلمات)
    الناتج = ""
    صف = []

    من الحروف في الحروف_كلمات
        من الحرف في الحروف
            الناتج = الناتج + الحرف
        دور
        صف + الناتج
        الناتج = ""
    دور

    مرر صف
تمام

//------------------------------------------------------------------------------
// دالة: حروف_كملصوق(نص)
// هدفها: تحليل النص كملصوق (بدون أول حرف) ، كملصوق_ملحق (بدون أول حرف و أخر حرف ) ، كملحق (بدون أخر حرف )
//------------------------------------------------------------------------------
دالة حروف_كملصوق(نص)

    كملصوق = ""
    كملصوق_ملحق = ""
    كملحق = ""
    البداية = ""
    مصفوفة = []

    ط = 0
    س = 1
    وحدات = len(نص)

    كلما س <= وحدات

        رقم_الرمز = Ascii(نص[س])

        // حرف 1 بايت
        لو ((رقم_الرمز & 0xc0) = 0x0)
            مصفوفة + (نص[س])

            لو (ط != 0)
                كملصوق += نص[س]
            لا
                البداية = نص[س]
            تم

            لو (س+1 >= وحدات)
                كملصوق_ملحق = كملصوق
                كملحق = البداية + كملصوق
            تم

            س += 1
            ط += 1

        // حرف 2 بايت
        إذا ((رقم_الرمز & 0xe0) = 0xc0)
            مصفوفة + (نص[س] + نص[س+1])

            لو (س+2 >= وحدات)
                كملصوق_ملحق = كملصوق
                كملحق = البداية + كملصوق
            تم

            لو (ط != 0)
                كملصوق += (نص[س] + نص[س+1])
            لا
                البداية = (نص[س] + نص[س+1])
            تم

            س += 2
            ط += 1

        // حرف 3 بايت
        إذا ((رقم_الرمز & 0xf0) = 0xe0)
            مصفوفة + (نص[س] + نص[س+1] + نص[س+2])

            لو (س+3 >= وحدات)
                كملصوق_ملحق = كملصوق
                كملحق = البداية + كملصوق
            تم

            لو (ط != 0)
                كملصوق += (نص[س] + نص[س+1] + نص[س+2])
            لا
                البداية = (نص[س] + نص[س+1] + نص[س+2])
            تم

            س += 3
            ط += 1

        // حرف 4 بايت — غير مدعوم
        إذا ((رقم_الرمز & 0xf8) = 0xf0)
            مرر -1

        لا
            // fallback
            لو (رقم_الرمز >= Ascii(' '))
                مصفوفة + نص[س]

                لو (س+1 >= وحدات)
                    كملصوق_ملحق = كملصوق
                    كملحق = البداية + كملصوق
                تم

                لو (ط != 0)
                    كملصوق += نص[س]
                لا
                    البداية = نص[س]
                تم

                س += 1
                ط += 1

            لا
                مرر []
            تم
        تم

    لف

    // تخزين البيانات الإضافية في المصفوفة
    مصفوفة[:كملصوق] = كملصوق
    مصفوفة[:قيم] = نص
    مصفوفة[:كملصوق_ملحق] = كملصوق_ملحق
    مصفوفة[:كملحق] = كملحق

    مرر مصفوفة
تمام

//------------------------------------------------------------------------------
// دالة: طول8(نص)
// هدفها: حساب عدد الأحرف الحقيقية في سلسلة UTF-8 (وليس عدد البايتات)
//------------------------------------------------------------------------------
دالة طول8(نص)

    ط = 0
    س = 1

    كلما س <= len(نص)

        رقم_الرمز = Ascii(نص[س])

        لو ((رقم_الرمز & 0xc0) = 0x0)
            س += 1
            ط += 1

        إذا ((رقم_الرمز & 0xe0) = 0xc0)
            س += 2
            ط += 1

        إذا ((رقم_الرمز & 0xf0) = 0xe0)
            س += 3
            ط += 1

        إذا ((رقم_الرمز & 0xf8) = 0xf0)
            مرر -1

        لا
            لو (رقم_الرمز >= Ascii(' '))
                س += 1
                ط += 1
            لا
                مرر -1
            تم
        تم

    لف

    مرر ط
تمام

//------------------------------------------------------------------------------
// دالة: أقسم(النص, كلمة)
// هدفها: محاولة تقسيم النص بناءً على كلمة محددة بطريقة يدوية
//------------------------------------------------------------------------------
دالة أقسم(النص, كلمة)

    رقم = 1
    طول_كلمة = طول(كلمة)
    حرف = كلمة[رقم]

    متطبق = 0
    المجموعة = []
    الكلمة = ""
    نص = ""

    من الحرف في النص

        لو (الحرف != حرف)

            لو (متطبق)
                الكلمة += نص
                نص = ""
                رقم = 1
                حرف = كلمة[رقم]
            تم

            الكلمة += الحرف
            متطبق = 0

        لا
            لو (طول_كلمة = رقم)
                المجموعة + الكلمة
                الكلمة = ""
                نص = ""
                رقم = 1
                حرف = كلمة[رقم]
                متطبق = 0
            لا
                متطبق = 1
                نص += الحرف
                رقم++
                حرف = كلمة[رقم]
            تم

        تم

    دور

    المجموعة + الكلمة
    مرر المجموعة
تمام

//------------------------------------------------------------------------------
// دوال مساعدة بسيطة
//------------------------------------------------------------------------------

دالة طول(متغير)
    مرر len(متغير)
تمام

دالة أجعل_نص(متغير)
    مرر String(متغير)
تمام

دالة هذا_نص(متغير)
    مرر isString(متغير)
تمام

//------------------------------------------------------------------------------
// دالة: ح(متغير)
// هدفها: إعادة المتغير كنص إذا كان نصاً، أو تحويله إلى حرف إذا كان عدداً
//------------------------------------------------------------------------------
دالة ح(متغير)
    لو هذا_نص(متغير)
        مرر متغير
    تم
    مرر Char(متغير)
تمام
`;

    const filename = 'النص.ض';
    const statusMessageElement = document.getElementById('statusMessage');

    // عرض المحتوى في منطقة العرض عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('fileContentDisplay').textContent = fileContent;
    });

    function showStatusMessage(message) {
        statusMessageElement.textContent = message;
        statusMessageElement.style.display = 'block';
        setTimeout(() => {
            statusMessageElement.style.display = 'none';
        }, 3000); // إخفاء الرسالة بعد 3 ثوانٍ
    }

    async function copyContent() {
        try {
            await navigator.clipboard.writeText(fileContent);
            showStatusMessage('تم نسخ المحتوى بنجاح!');
        } catch (err) {
            console.error('فشل في نسخ المحتوى: ', err);
            showStatusMessage('فشل في نسخ المحتوى.');
        }
    }

    function downloadFile() {
        const blob = new Blob([fileContent], { type: 'text/plain;charset=utf-8' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(a.href);
        showStatusMessage('جاري تنزيل الملف...');
    }
</script>

</body>
</html>
